{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
&rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

{% if selected_users %}
<p>{% blocktrans count counter=selected_users|length %}Sending email to {{ counter }} selected user.{% plural %}Sending email to {{ counter }} selected users.{% endblocktrans %}</p>
{% else %}
<p>{% trans "Sending email to all users with email addresses." %}</p>
{% endif %}

<form method="post" action="{% url 'admin:users_user_send_bulk_email' %}">
    {% csrf_token %}
    
    {% if selected_users %}
        {% for user_id in selected_users %}
            <input type="hidden" name="user_ids" value="{{ user_id }}">
        {% endfor %}
    {% endif %}
    
    <fieldset class="module aligned">
        <div class="form-row">
            <div>
                <label for="id_subject">{% trans "Subject" %}:</label>
                <input type="text" name="subject" id="id_subject" required style="width: 100%; max-width: 600px;" />
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="id_message">{% trans "Message (Plain Text)" %}:</label>
                <textarea name="message" id="id_message" rows="10" required style="width: 100%; max-width: 800px;"></textarea>
                <p class="help">{% trans "Plain text version of the email." %}</p>
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="id_html_message">{% trans "HTML Message (Optional)" %}:</label>
                <textarea name="html_message" id="id_html_message" rows="15" style="width: 100%; max-width: 800px;"></textarea>
                <p class="help">{% trans "HTML version of the email. If provided, recipients will receive the HTML version." %}</p>
            </div>
        </div>
    </fieldset>
    
    <div class="submit-row">
        <input type="submit" value="{% trans 'Send Emails' %}" class="default" />
        <a href="{% url opts|admin_urlname:'changelist' %}" class="button">{% trans "Cancel" %}</a>
    </div>
</form>

{% endblock %}

